<!-- booking.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book Now - HiHa EXCLUSIVE DINER</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>ONE CHEF, ONE GUEST, ONE UNIQUE EXPERIENCE</h1>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="chefs.html">Our Chefs</a></li>
        <li><a href="menu-selection.html">Menu</a></li>
        <li><a href="booking.html">Book Now</a></li>
        <li><a href="contact.html">Contact Us</a></li>
      </ul>
    </nav>
  </header>
  <main>
    <section class="hero">
      <h2>Reserve Your Exclusive Dining Experience</h2>
      <p>Book your personalized culinary journey with our master chefs</p>
    </section>

    <section class="booking-form">
      <div class="form-container">
        <h3>Personal Information</h3>
        <form id="bookingForm">
          <div class="form-group">
            <label for="name">Full Name *</label>
            <input type="text" id="name" name="name" required>
          </div>

          <div class="form-group">
            <label for="email">Email Address (Optional)</label>
            <input type="email" id="email" name="email">
          </div>

          <div class="form-group">
            <label for="phone">Phone Number *</label>
            <input type="tel" id="phone" name="phone" required>
          </div>

          <div class="form-group">
            <label for="guests">Number of Guests *</label>
            <select id="guests" name="guests" required>
              <option value="">Select number of guests</option>
              <option value="1">1 Guest</option>
              <option value="2">2 Guests</option>
              <option value="3">3 Guests</option>
              <option value="4">4 Guests</option>
              <option value="5">5 Guests</option>
              <option value="6">6 Guests</option>
            </select>
          </div>

          <h3>Reservation Details</h3>
          
          <div class="form-group">
            <label for="date">Preferred Date *</label>
            <input type="date" id="date" name="date" required>
          </div>

          <div class="form-group">
            <label for="time">Preferred Time *</label>
            <select id="time" name="time" required>
              <option value="">Select time</option>
              <option value="12:00">12:00 PM</option>
              <option value="12:30">12:30 PM</option>
              <option value="13:00">1:00 PM</option>
              <option value="13:30">1:30 PM</option>
              <option value="14:00">2:00 PM</option>
              <option value="18:00">6:00 PM</option>
              <option value="18:30">6:30 PM</option>
              <option value="19:00">7:00 PM</option>
              <option value="19:30">7:30 PM</option>
              <option value="20:00">8:00 PM</option>
              <option value="20:30">8:30 PM</option>
              <option value="21:00">9:00 PM</option>
            </select>
          </div>

          <div class="form-group">
            <label for="occasion">Special Occasion (Optional)</label>
            <select id="occasion" name="occasion">
              <option value="">Select occasion</option>
              <option value="anniversary">Anniversary</option>
              <option value="birthday">Birthday</option>
              <option value="proposal">Proposal</option>
              <option value="business">Business Dinner</option>
              <option value="celebration">Celebration</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label for="dietary">Dietary Restrictions (Optional)</label>
            <textarea id="dietary" name="dietary" placeholder="Any allergies, dietary restrictions, or special requirements?"></textarea>
          </div>

          <div class="form-group">
            <label for="special-requests">Special Requests (Optional)</label>
            <textarea id="special-requests" name="special-requests" placeholder="Any special requests or preferences?"></textarea>
          </div>

          <div class="booking-summary">
            <div class="summary-header">
              <a href="menu-selection.html" class="menu-link">ðŸ“‹ Menu</a>
              <h3>Your Selection Summary</h3>
            </div>
            <div id="selection-summary">
              <p>Please complete your menu selection first</p>
            </div>
          </div>

          <!-- Hidden fields for Formspree -->
          <input type="hidden" name="selectedChef" id="hiddenChef">
          <input type="hidden" name="selectedDishes" id="hiddenDishes">
          <input type="hidden" name="sizePreferences" id="hiddenSizePreferences">
          <input type="hidden" name="menuSpecialRequests" id="hiddenSpecialRequests">

          <div class="form-actions">
            <button type="submit" class="cta-button">Confirm Reservation</button>
          </div>
        </form>
      </div>
    </section>
  </main>
  <footer>
    <p>&copy; HiHa EXCLUSIVE DINER. All rights reserved.</p>
  </footer>

  <script src="alerts.js"></script>
  <script>
    // Pricing object for all menu items in CAD
    const menuPrices = {
      // Appetizers
      'samosa': { regular: 8.50, large: 10.50, 'extra-large': 12.50 },
      'chicken-tikka': { regular: 10.50, large: 12.50, 'extra-large': 14.50 },
      'onion-rings': { regular: 7.50, large: 9.50, 'extra-large': 11.50 },
      'mozzarella-sticks': { regular: 9.50, large: 11.50, 'extra-large': 13.50 },
      
      // Main Course
      'butter-chicken': { regular: 15.50, large: 19.50, 'extra-large': 23.50 },
      'paneer-curry': { regular: 13.50, large: 17.50, 'extra-large': 21.50 },
      'grilled-chicken': { regular: 14.50, large: 18.50, 'extra-large': 22.50 },
      'fish-chips': { regular: 16.50, large: 20.50, 'extra-large': 24.50 },
      
      // Breads & Rice
      'naan': { regular: 3.50, large: 4.50, 'extra-large': 5.50 },
      'basmati-rice': { regular: 4.50, large: 5.50, 'extra-large': 6.50 },
      'garlic-bread': { regular: 4.00, large: 5.00, 'extra-large': 6.00 },
      'fried-rice': { regular: 6.50, large: 7.50, 'extra-large': 8.50 },
      
      // Desserts
      'gulab-jamun': { regular: 6.00, large: 7.50, 'extra-large': 9.00 },
      'rasgulla': { regular: 6.50, large: 8.00, 'extra-large': 9.50 },
      'chocolate-brownie': { regular: 5.50, large: 6.50, 'extra-large': 7.50 },
      'ice-cream': { regular: 4.50, large: 5.50, 'extra-large': 6.50 },
      
      // Beverages
      'mango-lassi': { regular: 5.00, large: 6.00, 'extra-large': 7.00 },
      'masala-chai': { regular: 3.50, large: 4.50, 'extra-large': 5.50 },
      'mojito': { regular: 4.50, large: 5.50, 'extra-large': 6.50 },
      'cold-coffee': { regular: 6.00, large: 7.00, 'extra-large': 8.00 }
    };

    // Function to calculate total price
    function calculateTotalPrice(selectedDishesWithSizes) {
      let total = 0;
      selectedDishesWithSizes.forEach(dish => {
        if (menuPrices[dish.item] && menuPrices[dish.item][dish.size]) {
          total += menuPrices[dish.item][dish.size];
        }
      });
      return total;
    }

    // Function to get chef display name
    function getChefDisplayName(chefCode) {
      const chefNames = {
        'aryan': 'Chef Aryan Mehta - North Indian',
        'riya': 'Chef Riya Kapoor - South Indian',
        'veer': 'Chef Veer Khurana - Mughlai',
        'meher': 'Chef Meher Singh - Coastal Seafood',
        'aarav': 'Chef Aarav Bhatia - Tandoori',
        'anaya': 'Chef Anaya Malhotra - Vegetarian',
        'karan': 'Chef Karan Nambiar - Street Food Fusion',
        'ishita': 'Chef Ishita Reddy - Hyderabadi',
        'dev': 'Chef Dev Rana - Kerala',
        'sanika': 'Chef Sanika Iyer - Punjabi Dhaba',
        'yash': 'Chef Yash Vora - Rajasthani',
        'tara': 'Chef Tara Joshi - Gujarati',
        'raghav': 'Chef Raghav Sethi - Maharashtrian',
        'kiara': 'Chef Kiara Deshmukh - Chettinad',
        'arjun': 'Chef Arjun Luthra - Awadhi',
        'naina': 'Chef Naina D\'Souza - Bengali',
        'kabir': 'Chef Kabir Roy - Bihari',
        'avni': 'Chef Avni Shah - Tamil Brahmin',
        'siddharth': 'Chef Siddharth Saxena - Kashmiri',
        'myra': 'Chef Myra Chauhan - Sindhi'
      };
      return chefNames[chefCode] || chefCode;
    }

    // Function to get dish display name
    function getDishDisplayName(dishCode) {
      const dishNames = {
        'samosa': 'Samosa',
        'chicken-tikka': 'Chicken Tikka',
        'onion-rings': 'Onion Rings',
        'mozzarella-sticks': 'Mozzarella Sticks',
        'butter-chicken': 'Butter Chicken',
        'paneer-curry': 'Paneer Curry',
        'grilled-chicken': 'Grilled Chicken',
        'fish-chips': 'Fish and Chips',
        'naan': 'Naan',
        'basmati-rice': 'Basmati Rice',
        'garlic-bread': 'Garlic Bread',
        'fried-rice': 'Fried Rice',
        'gulab-jamun': 'Gulab Jamun',
        'rasgulla': 'Rasgulla',
        'chocolate-brownie': 'Chocolate Brownie',
        'ice-cream': 'Ice Cream',
        'mango-lassi': 'Mango Lassi',
        'masala-chai': 'Masala Chai',
        'mojito': 'Mojito',
        'cold-coffee': 'Cold Coffee'
      };
      return dishNames[dishCode] || dishCode;
    }

    // Redirect if no menu selection
    if (!localStorage.getItem('selectedDishesWithSizes') || JSON.parse(localStorage.getItem('selectedDishesWithSizes')).length === 0) {
      // showBookingRedirectAlert();
    }

    // Load saved menu selection
    window.onload = function() {
      const selectedChef = localStorage.getItem('selectedChef');
      const selectedDishesWithSizes = JSON.parse(localStorage.getItem('selectedDishesWithSizes') || '[]');
      const specialRequests = localStorage.getItem('specialRequests');
      
      if (selectedChef) {
        const summaryDiv = document.getElementById('selection-summary');
        let summaryHTML = `<p><strong>Selected Chef:</strong> ${getChefDisplayName(selectedChef)}</p>`;
        
        if (selectedDishesWithSizes.length > 0) {
          summaryHTML += `<p><strong>Selected Dishes:</strong></p><ul>`;
          selectedDishesWithSizes.forEach(dish => {
            const sizeText = dish.size !== 'regular' ? ` (${dish.size})` : '';
            const dishDisplayName = getDishDisplayName(dish.item);
            summaryHTML += `<li>${dishDisplayName}${sizeText}</li>`;
          });
          summaryHTML += `</ul>`;
          
          // Calculate and display total price
          const totalPrice = calculateTotalPrice(selectedDishesWithSizes);
          summaryHTML += `<p><strong>Total Price: $${totalPrice.toFixed(2)} CAD</strong></p>`;
        }
        
        if (specialRequests) {
          summaryHTML += `<p><strong>Special Requests:</strong> ${specialRequests}</p>`;
        }
        
        summaryDiv.innerHTML = summaryHTML;
        
        // Populate hidden fields for Formspree
        document.getElementById('hiddenChef').value = selectedChef;
        document.getElementById('hiddenDishes').value = JSON.stringify(selectedDishesWithSizes);
        document.getElementById('hiddenSpecialRequests').value = specialRequests || '';
      }
    };

    // Form submission
    document.getElementById('bookingForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Get menu selection data
      const selectedChef = localStorage.getItem('selectedChef');
      const selectedDishesWithSizes = JSON.parse(localStorage.getItem('selectedDishesWithSizes') || '[]');
      const specialRequests = localStorage.getItem('specialRequests');
      
      // Update hidden fields
      document.getElementById('hiddenChef').value = selectedChef || '';
      document.getElementById('hiddenDishes').value = JSON.stringify(selectedDishesWithSizes);
      document.getElementById('hiddenSpecialRequests').value = specialRequests || '';
      
      // Show loading message
      const submitButton = this.querySelector('button[type="submit"]');
      const originalText = submitButton.textContent;
      submitButton.textContent = 'Submitting...';
      submitButton.disabled = true;
      
      // Prepare form data for Formspree
      const formData = new FormData(this);
      formData.append('_subject', 'New Booking - HiHa EXCLUSIVE DINER');
      
      // Submit to Formspree using fetch
      fetch('https://formspree.io/f/movwzrle', {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      })
      .then(response => {
        if (response.ok) {
          // Show success message
          showBookingSuccessAlert();
          
          // Clear localStorage
          localStorage.removeItem('selectedChef');
          localStorage.removeItem('selectedDishesWithSizes');
          localStorage.removeItem('specialRequests');
          
          // Redirect to home page
          window.location.href = 'index.html';
        } else {
          throw new Error('Submission failed');
        }
      })
      .catch(error => {
        // showBookingErrorAlert();
        submitButton.textContent = originalText;
        submitButton.disabled = false;
      });
    });
  </script>
</body>
</html> 